@using CHE.Web.Areas.Identity.Pages.Account.Manage.Services
@inject IAccountNavScheduleService AccountNavScheduleService
@{
    var scheduleId = await AccountNavScheduleService.GetScheduleIdByUserAsync(this.User);
    var a = this.User;
}

<nav class="nav-coop">
    <ul>
        <li><a asp-area="Identity" asp-page="/Account/Manage/Index">Info</a></li>
        <li><a asp-area="Identity" asp-page="/Account/Manage/Email">Email</a></li>
        <li><a asp-area="Identity" asp-page="/Account/Manage/ChangePassword">Password</a></li>
        @if (this.User.IsInRole(GlobalConstants.TEACHER_ROLE))
        {
            <li><a asp-area="Identity" asp-page="/Account/Manage/Profile">Profile</a></li>
            <li><a asp-area="Identity" asp-page="/Account/Manage/JoinRequest">Join requests</a></li>
            <li><a asp-area="Identity" asp-page="/Account/Manage/Review">Reviews</a></li>
            <li><a asp-area="" asp-controller="Schedules" asp-action="Details" asp-route-id="@scheduleId">Schedule</a></li>
        }
        <li><a asp-area="Identity" asp-page="/Account/Manage/PersonalData">Personal data</a></li>
    </ul>
</nav>
